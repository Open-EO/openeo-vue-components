{"version":3,"sources":["webpack:///./node_modules/@radiantearth/stac-migrate/migrate.js","webpack:///./components/internal/StacFields.vue?15c5","webpack:///components/internal/StacFields.vue","webpack:///./components/internal/StacFields.vue?9857","webpack:///./components/internal/StacFields.vue","webpack:///./components/internal/StacFields.vue?99e2"],"names":["compareVersions","LATEST_VERSION","DONE","SCHEMAS","EXTENSIONS","itemAndCollection","datacube","eo","file","label","pointcloud","processing","projection","raster","sar","sat","scientific","view","version","timestamps","catalog","collection","item","Object","assign","V","compare","_","val","type","Array","isArray","obj","oldKey","newKey","key","newKeys","summary","i","value","length","valueToRemove","index","indexOf","splice","valueToAdd","push","sort","defaultValue","context","newExtension","isObject","addToArrayIfNotExists","oldExtension","removeFromArray","oldShortnames","keys","newSchemas","values","mapValues","objectsToCheck","assets","concat","item_assets","summaries","properties","forEach","prefix","match","ext","is","addExtension","oldValues","newValues","fn","map","fromSummary","mergedSummary","condition","isDefined","migrations","startsWith","this","toISOString","error","date","Date","replace","Checksum","hexString","Error","Uint8Array","byte","parseInt","bytes","reduce","str","toString","padStart","algo","multihash","encoded","encode","hexToUint8","uint8ToHex","console","warn","Catalog","updateVersionNumber","set","stac_version","before","migrateExtensionShortnames","ensure","runAll","populateExtensions","Collection","migrate","spatial","bbox","temporal","interval","extent","min","max","start","end","unshift","count","Math","union","fill","middle","c","findIndex","removeExtension","Asset","migrateAll","rename","other_properties","prop","minimum","maximum","filter","v","a","b","links","find","link","includes","rel","mapObject","Fields","moveTo","Item","geometry","commons","field","asset","bands","band","toUTC","toMultihash","toArray","flattenArray","flattenOneElementArray","Migrate","object","license","module","exports","render","_vm","_h","$createElement","_c","_self","staticClass","_l","group","headingTag","extension","tag","domProps","_s","class","wrap","Boolean","custom","items","attrs","_t","formatted","_e","_v","col","row","r","staticRenderFns","component"],"mappings":"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","file":"js/chunk-198ac786.da6db666.js","sourcesContent":["// Migration rules partly based on PySTAC and @openeo/js-commons,\r\n// see https://github.com/stac-utils/pystac/tree/v0.5.4/pystac/serialization/migrate.py\r\n// and https://github.com/Open-EO/openeo-js-commons/tree/v1.2.0/src/migrate/collections.js\r\n\r\nvar compareVersions = require('compare-versions');\r\n\r\nconst LATEST_VERSION = '1.0.0';\r\nconst DONE = true; // This is used to verify in code coverage whether something has been used or not\r\nconst SCHEMAS = {\r\n\t'datacube': 'https://stac-extensions.github.io/datacube/v1.0.0/schema.json',\r\n\t'eo': 'https://stac-extensions.github.io/eo/v1.0.0/schema.json',\r\n\t'file': 'https://stac-extensions.github.io/file/v1.0.0/schema.json',\r\n\t'item-assets': 'https://stac-extensions.github.io/item-assets/v1.0.0/schema.json',\r\n\t'label': 'https://stac-extensions.github.io/label/v1.0.0/schema.json',\r\n\t'pointcloud': 'https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json',\r\n\t'processing': 'https://stac-extensions.github.io/processing/v1.0.0/schema.json',\r\n\t'projection': 'https://stac-extensions.github.io/projection/v1.0.0/schema.json',\r\n\t'raster': 'https://stac-extensions.github.io/raster/v1.0.0/schema.json',\r\n\t'sar': 'https://stac-extensions.github.io/sar/v1.0.0/schema.json',\r\n\t'sat': 'https://stac-extensions.github.io/sat/v1.0.0/schema.json',\r\n\t'scientific': 'https://stac-extensions.github.io/scientific/v1.0.0/schema.json',\r\n\t'timestamps': 'https://stac-extensions.github.io/timestamps/v1.0.0/schema.json',\r\n\t'version': 'https://stac-extensions.github.io/version/v1.0.0/schema.json',\r\n\t'view': 'https://stac-extensions.github.io/view/v1.0.0/schema.json'\r\n};\r\nconst EXTENSIONS = {\r\n\t// Add a : at the end to indicate it has a prefix, otherwise list all fields separately (see version extension for example).\r\n\titemAndCollection: {\r\n\t\t// with prefix\r\n\t\t'cube:': SCHEMAS.datacube,\r\n\t\t'eo:': SCHEMAS.eo,\r\n\t\t'file:': SCHEMAS.file,\r\n\t\t'label:': SCHEMAS.label,\r\n\t\t'pc:': SCHEMAS.pointcloud,\r\n\t\t'processing:': SCHEMAS.processing,\r\n\t\t'proj:': SCHEMAS.projection,\r\n\t\t'raster:': SCHEMAS.raster,\r\n\t\t'sar:': SCHEMAS.sar,\r\n\t\t'sat:': SCHEMAS.sat,\r\n\t\t'sci:': SCHEMAS.scientific,\r\n\t\t'view:': SCHEMAS.view,\r\n\t\t// without prefix\r\n\t\t'version': SCHEMAS.version,\r\n\t\t'deprecated': SCHEMAS.version,\r\n\t\t'published': SCHEMAS.timestamps,\r\n\t\t'expires': SCHEMAS.timestamps,\r\n\t\t'unpublished': SCHEMAS.timestamps\r\n\t},\r\n\tcatalog: {\r\n\t\t// None yet\r\n\t},\r\n\tcollection: {\r\n\t\t'item_assets': SCHEMAS['item-assets']\r\n\t},\r\n\titem: {\r\n\t\t// None yet\r\n\t},\r\n};\r\nEXTENSIONS.collection = Object.assign(EXTENSIONS.collection, EXTENSIONS.itemAndCollection);\r\nEXTENSIONS.item = Object.assign(EXTENSIONS.item, EXTENSIONS.itemAndCollection);\r\n\r\nvar V = {\r\n\tversion: LATEST_VERSION,\r\n\r\n\tset(version) {\r\n\t\tif (!version) {\r\n\t\t\tversion = '0.6.0'; // Assume the worst case, it doesn't seem there's a clear indicator for 0.7.0\r\n\t\t}\r\n\t\tV.version = version;\r\n\t},\r\n\r\n\tbefore(version) {\r\n\t\treturn compareVersions.compare(V.version, version, '<');\r\n\t}\r\n};\r\n\r\nvar _ = {\r\n\r\n\ttype(val) {\r\n\t\tlet type = typeof val;\r\n\t\tif (type === 'object') {\r\n\t\t\tif (val === null) {\r\n\t\t\t\treturn 'null';\r\n\t\t\t}\r\n\t\t\telse if (Array.isArray(val)) {\r\n\t\t\t\treturn 'array';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn type;\r\n\t},\r\n\r\n\tis(val, type) {\r\n\t\treturn (_.type(val) === type);\r\n\t},\r\n\r\n\tisDefined(val) {\r\n\t\treturn (typeof val !== 'undefined');\r\n\t},\r\n\r\n\tisObject(obj) {\r\n\t\treturn (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\r\n\t},\r\n\r\n\trename(obj, oldKey, newKey) {\r\n\t\tif (typeof obj[oldKey] !== 'undefined' && typeof obj[newKey] === 'undefined') {\r\n\t\t\tobj[newKey] = obj[oldKey];\r\n\t\t\tdelete obj[oldKey];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\ttoArray(obj, key) {\r\n\t\tif (typeof obj[key] !== 'undefined' && !Array.isArray(obj[key])) {\r\n\t\t\tobj[key] = [obj[key]];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tflattenArray(obj, key, newKeys, summary = false) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tfor(let i in obj[key]) {\r\n\t\t\t\tif (typeof newKeys[i] === 'string') {\r\n\t\t\t\t\tlet value = obj[key][i];\r\n\t\t\t\t\tobj[newKeys[i]] = summary ? [value] : value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tflattenOneElementArray(obj, key, summary = false) {\r\n\t\tif (!summary && Array.isArray(obj[key])) {\r\n\t\t\tif (obj[key].length === 1) {\r\n\t\t\t\tobj[key] = obj[key][0];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false; // It's still an array and we don't know which element to choose\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true; // It's already a single element\r\n\t},\r\n\r\n\tremoveFromArray(obj, key, valueToRemove) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tlet index = obj[key].indexOf(valueToRemove);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tobj[key].splice(index, 1);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\taddToArrayIfNotExists(obj, key, valueToAdd) {\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tlet index = obj[key].indexOf(valueToAdd);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tobj[key].push(valueToAdd);\r\n\t\t\t}\r\n\t\t\tobj[key].sort();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tensure(obj, key, defaultValue) {\r\n\t\tif (_.type(defaultValue) !== _.type(obj[key])) {\r\n\t\t\tobj[key] = defaultValue;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\taddExtension(context, newExtension) {\r\n\t\tif (!_.isObject(context)) {\r\n\t\t\treturn true; // We are likely in summaries and don't need to do anything\r\n\t\t}\r\n\r\n\t\treturn _.addToArrayIfNotExists(context, 'stac_extensions', newExtension) && DONE;\r\n\t},\r\n\r\n\tremoveExtension(context, oldExtension) {\r\n\t\tif (!_.isObject(context)) {\r\n\t\t\treturn true; // We are likely in summaries and don't need to do anything\r\n\t\t}\r\n\r\n\t\treturn _.removeFromArray(context, 'stac_extensions', oldExtension) && DONE;\r\n\t},\r\n\r\n\tmigrateExtensionShortnames(context) {\r\n\t\tlet oldShortnames = Object.keys(SCHEMAS);\r\n\t\tlet newSchemas = Object.values(SCHEMAS);\r\n\t\treturn _.mapValues(context, 'stac_extensions', oldShortnames, newSchemas);\r\n\t},\r\n\r\n\tpopulateExtensions(context, type) {\r\n\t\tlet objectsToCheck = [];\r\n\t\tif (type == 'catalog' || type == 'collection') {\r\n\t\t\tobjectsToCheck.push(context);\r\n\t\t}\r\n\t\tif ((type == 'item' || type == 'collection') && _.isObject(context.assets)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.assets));\r\n\t\t}\r\n\t\tif (type == 'collection' && _.isObject(context.item_assets)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.item_assets));\r\n\t\t}\r\n\t\tif (type == 'collection' && _.isObject(context.summaries)) {\r\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.summaries));\r\n\t\t}\r\n\t\tif (type == 'item' && _.isObject(context.properties)) {\r\n\t\t\tobjectsToCheck.push(context.properties);\r\n\t\t}\r\n\r\n\t\tfor (let obj of objectsToCheck) {\r\n\t\t\tObject.keys(obj).forEach(key => {\r\n\t\t\t\tlet prefix = key.match(/^(\\w+:|[^:]+$)/i);\r\n\t\t\t\tif (Array.isArray(prefix)) {\r\n\t\t\t\t\tlet ext = EXTENSIONS[type][prefix[0]];\r\n\t\t\t\t\t_.is(ext, 'string') && _.addExtension(context, ext) && DONE;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tmapValues(obj, key, oldValues, newValues) {\r\n\t\tlet fn = value => {\r\n\t\t\tlet index = oldValues.indexOf(value);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\treturn newValues[index];\r\n\t\t\t}\r\n\t\t\treturn value;\t\r\n\t\t};\r\n\t\tif (Array.isArray(obj[key])) {\r\n\t\t\tobj[key] = obj[key].map(fn);\r\n\t\t}\r\n\t\telse if (typeof obj[key] !== 'undefined') {\r\n\t\t\tobj[key] = fn(obj[key]);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tmapObject(obj, fn) {\r\n\t\tfor(let key in obj) {\r\n\t\t\tobj[key] = fn(obj[key], key);\r\n\t\t}\r\n\t},\r\n\r\n\tmoveTo(obj, key, context, fromSummary = false, mergedSummary = false) {\r\n\t\tif (fromSummary) {\r\n\t\t\tif (mergedSummary) {\r\n\t\t\t\tcondition = val => Array.isArray(val);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcondition = val => Array.isArray(val) && val.length === 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcondition = _.isDefined\r\n\t\t}\r\n\t\tif (condition(obj[key])) {\r\n\t\t\tcontext[key] = fromSummary && !mergedSummary ? obj[key][0] : obj[key];\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\trunAll(migrations, obj, context = null) {\r\n\t\tfor(let fn in migrations) {\r\n\t\t\tif (!fn.startsWith('migrate')) {\r\n\t\t\t\tmigrations[fn](obj, context);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttoUTC(obj, key) {\r\n\t\tif (typeof obj[key] === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tobj[key] = this.toISOString(obj[key]);\r\n\t\t\t\treturn true;\r\n\t\t\t} catch(error) {}\r\n\t\t}\r\n\t\tdelete obj[key];\r\n\t\treturn false;\r\n\t},\r\n\r\n\ttoISOString(date) {\r\n\t\tif (!(date instanceof Date)) {\r\n\t\t\tdate = new Date(date);\r\n\t\t}\r\n\t\treturn date.toISOString().replace('.000', ''); // Don't export milliseconds if not needed\r\n\t}\r\n\r\n};\r\n\r\nvar Checksum = {\r\n\r\n\thexToUint8(hexString) {\r\n\t\tif(hexString.length === 0 || hexString.length % 2 !== 0){\r\n\t\t\tthrow new Error(`The string \"${hexString}\" is not valid hex.`)\r\n\t\t}\r\n  \t\treturn new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\r\n\t},\r\n\r\n\tuint8ToHex(bytes) {\r\n\t\treturn bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\r\n\t},\r\n\r\n\ttoMultihash(obj, key, algo) {\r\n\t\tif (!_.is(obj[key], 'string')) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst multihash = require('multihashes');\r\n\t\t\tconst encoded = multihash.encode(Checksum.hexToUint8(obj[key]), algo);\r\n\t\t\tobj[key] = Checksum.uint8ToHex(encoded);\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.warn(error);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Catalog = {\r\n\r\n\tmigrate(catalog, updateVersionNumber = true) {\r\n\t\tV.set(catalog.stac_version);\r\n\t\tif (updateVersionNumber) {\r\n\t\t\tcatalog.stac_version = LATEST_VERSION;\r\n\t\t}\r\n\t\tcatalog.type = 'Catalog';\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(catalog) && DONE;\r\n\r\n\t\t_.ensure(catalog, 'id', '') && DONE;\r\n\t\t_.ensure(catalog, 'description', '') && DONE;\r\n\t\t_.ensure(catalog, 'links', []) && DONE;\r\n\r\n\t\t_.runAll(Catalog, catalog, catalog);\r\n\r\n\t\t_.ensure(catalog, 'stac_extensions', []) && DONE;\r\n\t\tV.before('0.8.0') && _.populateExtensions(catalog, 'catalog') && DONE;\r\n\t}\r\n\r\n};\r\n\r\nvar Collection = {\r\n\r\n\tmigrate(collection, updateVersionNumber = true) {\r\n\t\tCatalog.migrate(collection, updateVersionNumber); // Migrates stac_version, stac_extensions, id, title, description, links\r\n\t\tcollection.type = 'Collection';\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(collection) && DONE;\r\n\r\n\t\t_.ensure(collection, 'license', 'proprietary') && DONE;\r\n\t\t_.ensure(collection, 'extent', {\r\n\t\t\tspatial: {\r\n\t\t\t\tbbox: []\r\n\t\t\t},\r\n\t\t\ttemporal: {\r\n\t\t\t\tinterval: []\r\n\t\t\t}\r\n\t\t}) && DONE;\r\n\r\n\t\t_.runAll(Collection, collection, collection);\r\n\r\n\t\t// Migrate Commons extension - part 3\r\n\t\tif (_.isObject(collection.properties)) {\r\n\t\t\t_.removeFromArray(collection, 'stac_extensions', 'commons') && DONE;\r\n\t\t\tdelete collection.properties;\r\n\t\t}\r\n\r\n\t\tV.before('0.8.0') && _.populateExtensions(collection, 'collection') && DONE;\r\n\t\tV.before('1.0.0-beta.1') && _.mapValues(collection, 'stac_extensions', ['assets'], ['item-assets']) && DONE;\r\n\t},\r\n\r\n\textent(collection) {\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t// Restructure spatial extent\r\n\t\t\tif (Array.isArray(collection.extent.spatial)) {\r\n\t\t\t\tcollection.extent.spatial = {\r\n\t\t\t\t\tbbox: [\r\n\t\t\t\t\t\tcollection.extent.spatial\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// Restructure temporal extent\r\n\t\t\tif (Array.isArray(collection.extent.temporal)) {\r\n\t\t\t\tcollection.extent.temporal = {\r\n\t\t\t\t\tinterval: [\r\n\t\t\t\t\t\tcollection.extent.temporal\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (V.before('1.0.0-rc.3')) {\r\n\t\t\t// The first extent in a Collection is always the overall extent, followed by more specific extents.\r\n\t\t\tif (Array.isArray(collection.extent.temporal.interval) && collection.extent.temporal.interval.length > 1) {\r\n\t\t\t\tlet min, max;\r\n\t\t\t\tfor(let interval of collection.extent.temporal.interval) {\r\n\t\t\t\t\tif (interval[0] === null) {\r\n\t\t\t\t\t\tmin = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof interval[0] === 'string' && min !== null) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet start = new Date(interval[0]);\r\n\t\t\t\t\t\t\tif (typeof min === 'undefined' || start < min) {\r\n\t\t\t\t\t\t\t\tmin = start;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (interval[1] === null) {\r\n\t\t\t\t\t\tmax = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof interval[1] === 'string' && max !== null) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlet end = new Date(interval[1]);\r\n\t\t\t\t\t\t\tif (typeof max === 'undefined' || end > max) {\r\n\t\t\t\t\t\t\t\tmax = end;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {}\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t\tcollection.extent.temporal.interval.unshift([\r\n\t\t\t\t\tmin ? _.toISOString(min) : null,\r\n\t\t\t\t\tmax ? _.toISOString(max) : null\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(collection.extent.spatial.bbox) && collection.extent.spatial.bbox.length > 1) {\r\n\t\t\t\tlet count = collection.extent.spatial.bbox.reduce((val, bbox) => Array.isArray(bbox) ? Math.max(bbox.length, val) : val, 4);\r\n\t\t\t\tif (count >= 4) {\r\n\t\t\t\t\tlet union = new Array(count).fill(null);\r\n\t\t\t\t\tlet middle = count / 2;\r\n\t\t\t\t\tfor(let bbox of collection.extent.spatial.bbox) {\r\n\t\t\t\t\t\tif (!Array.isArray(bbox) || bbox.length < 4) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(let i in bbox) {\r\n\t\t\t\t\t\t\tlet c = bbox[i];\r\n\t\t\t\t\t\t\tif (union[i] === null) {\r\n\t\t\t\t\t\t\t\tunion[i] = c;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (i < middle) {\r\n\t\t\t\t\t\t\t\tunion[i] = Math.min(c, union[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tunion[i] = Math.max(c, union[i]);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (union.findIndex(c => c === null) === -1) {\r\n\t\t\t\t\t\tcollection.extent.spatial.bbox.unshift(union);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcollectionAssets(collection) {\r\n\t\tV.before('1.0.0-rc.1') && _.removeExtension(collection, 'collection-assets') && DONE;\r\n\r\n\t\tAsset.migrateAll(collection);\r\n\t},\r\n\r\n\titemAsset(collection) {\r\n\t\tV.before('1.0.0-beta.2') && _.rename(collection, 'item_assets', 'assets');\r\n\r\n\t\tAsset.migrateAll(collection, 'item_assets');\r\n\t},\r\n\r\n\tsummaries(collection) {\r\n\t\t_.ensure(collection, 'summaries', {});\r\n\r\n\t\t// other_properties: An early version of the Collection summaries with a similar structure\r\n\t\t// Was mostly used in standalone collctions from openEO and GEE. Move other_properties to summaries.\r\n\t\tif (V.before('0.8.0') && _.isObject(collection.other_properties)) {\r\n\t\t\tfor(let key in collection.other_properties) {\r\n\t\t\t\tlet prop = collection.other_properties[key];\r\n\t\t\t\tif (Array.isArray(prop.extent) && prop.extent.length === 2) {\r\n\t\t\t\t\tcollection.summaries[key] = {\r\n\t\t\t\t\t\tminimum: prop.extent[0],\r\n\t\t\t\t\t\tmaximum: prop.extent[1],\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\telse if (Array.isArray(prop.values)) {\r\n\t\t\t\t\tif (prop.values.filter(v => Array.isArray(v)).length === prop.values.length) {\r\n\t\t\t\t\t\t// If it is an array of arrays, merge the arrays\r\n\t\t\t\t\t\tcollection.summaries[key] = prop.values.reduce((a, b) => a.concat(b), []);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcollection.summaries[key] = prop.values;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete collection.other_properties;\r\n\t\t}\r\n\r\n\t\t// Migrate Commons extension - part 2\r\n\t\t// Move properties to (single element) summaries if the Collection is standalone\r\n\t\t// see also https://github.com/stac-utils/stac-migrate/issues/3\r\n\t\tif (V.before('1.0.0-beta.1') && _.isObject(collection.properties) && !collection.links.find(link => ['child', 'item'].includes(link.rel))) {\r\n\t\t\tfor(let key in collection.properties) {\r\n\t\t\t\tlet value = collection.properties[key];\r\n\t\t\t\tif (!Array.isArray(value)) {\r\n\t\t\t\t\tvalue = [value];\r\n\t\t\t\t}\r\n\t\t\t\tcollection.summaries[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (V.before('1.0.0-rc.1')) {\r\n\t\t\t_.mapObject(collection.summaries, val => {\r\n\t\t\t\t_.rename(val, 'min', 'minimum') && DONE;\r\n\t\t\t\t_.rename(val, 'max', 'maximum') && DONE;\r\n\t\t\t\treturn val;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// now we can work on all summaries and migrate them\r\n\t\tFields.migrate(collection.summaries);\r\n\r\n\t\t// Some fields should usually be on root-level if there's only one element\r\n\t\t_.moveTo(collection.summaries, 'sci:doi', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'sci:publications', collection, true, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'sci:citation', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\r\n\t\t_.moveTo(collection.summaries, 'cube:dimensions', collection, true) && _.addExtension(collection, SCHEMAS.datacube) && DONE;\r\n\r\n\t\t// Remove summary field if empty\r\n\t\tif (Object.keys(collection.summaries).length === 0) {\r\n\t\t\tdelete collection.summaries;\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Item = {\r\n\r\n\tmigrate(item, collection = null, updateVersionNumber = true) {\r\n\t\tV.set(item.stac_version);\r\n\t\tif (updateVersionNumber) {\r\n\t\t\titem.stac_version = LATEST_VERSION;\r\n\t\t}\r\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(item) && DONE;\r\n\r\n\t\t_.ensure(item, 'id', '') && DONE;\r\n\t\t_.ensure(item, 'type', 'Feature') && DONE;\r\n\t\tif (!_.isObject(item.geometry)) {\r\n\t\t\titem.geometry = null;\r\n\t\t}\r\n\t\tif (item.geometry !== null) {\r\n\t\t\t_.ensure(item, 'bbox', []) && DONE;\r\n\t\t}\r\n\t\t_.ensure(item, 'properties', {}) && DONE;\r\n\t\t_.ensure(item, 'links', []) && DONE;\r\n\t\t_.ensure(item, 'assets', {}) && DONE;\r\n\r\n\t\t// Migrate Commons extension - part 1\r\n\t\tlet commons = false;\r\n\t\tif (_.isObject(collection) && _.isObject(collection.properties)) {\r\n\t\t\t_.removeFromArray(item, 'stac_extensions', 'commons');\r\n\t\t\titem.properties = Object.assign({}, collection.properties, item.properties);\r\n\t\t\tcommons = true;\r\n\t\t}\r\n\r\n\t\t_.runAll(Item, item, item);\r\n\r\n\t\tFields.migrate(item.properties, item);\r\n\r\n\t\tAsset.migrateAll(item);\r\n\r\n\t\t_.ensure(item, 'stac_extensions', []) && DONE;\r\n\t\t// Also populate extensions if commons has been implemented\r\n\t\t(V.before('0.8.0') || commons) && _.populateExtensions(item, 'item') && DONE;\r\n\t}\r\n\r\n};\r\n\r\nvar Asset = {\r\n\r\n\tmigrateAll(context, field = 'assets') {\r\n\t\tfor(let key in context[field]) {\r\n\t\t\tAsset.migrate(context[field][key], context);\r\n\t\t}\r\n\t},\r\n\r\n\tmigrate(asset, context) {\r\n\t\t_.runAll(Asset, asset, context);\r\n\t\tFields.migrate(asset, context);\r\n\t},\r\n\r\n\tmediaTypes(asset) {\r\n\t\t_.is(asset.type, 'string') && _.mapValues(\r\n\t\t\tasset, 'type',\r\n\t\t\t['image/vnd.stac.geotiff', \t\t\t'image/vnd.stac.geotiff; cloud-optimized=true'],\r\n\t\t\t['image/tiff; application=geotiff',\t'image/tiff; application=geotiff; profile=cloud-optimized']\r\n\t\t);\r\n\t},\r\n\r\n\teo(asset, context) {\r\n\t\tlet bands = _.isObject(context.properties) && Array.isArray(context.properties['eo:bands']) ? context.properties['eo:bands'] : [];\r\n\t\tif (Array.isArray(asset['eo:bands'])) {\r\n\t\t\tfor(let i in asset['eo:bands']) {\r\n\t\t\t\tlet band = asset['eo:bands'][i];\r\n\t\t\t\tif (_.is(band, 'number') && _.isObject(bands[band])) {\r\n\t\t\t\t\tband = bands[band];\r\n\t\t\t\t}\r\n\t\t\t\telse if (!_.isObject(band)) {\r\n\t\t\t\t\tband = {}; // \"Fix\" invalid band index\r\n\t\t\t\t}\r\n\t\t\t\tasset['eo:bands'][i] = band;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Fields = {\r\n\r\n\t// If no context is given, we are working in summaries\r\n\tmigrate(obj, context) {\r\n\t\t_.runAll(Fields, obj, context);\r\n\t},\r\n\r\n\t_commonMetadata(obj) {\r\n\t\t// Timestamps must be always in UTC\r\n\t\t// datetime, start_datetime and end_datetime already required UTC before\r\n\t\tif (V.before('1.0.0-rc.3')) {\r\n\t\t\t_.toUTC(obj, 'created') && DONE;\r\n\t\t\t_.toUTC(obj, 'updated') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\t_timestamps(obj) {\r\n\t\t// Timestamps must be always in UTC\r\n\t\t_.toUTC(obj, 'published') && DONE;\r\n\t\t_.toUTC(obj, 'expires') && DONE;\r\n\t\t_.toUTC(obj, 'unpublished') && DONE;\r\n\t},\r\n\r\n\t_versioningIndicator(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tchecksum(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'checksum:md5', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'md5') && DONE;\r\n\t\t\t_.rename(obj, 'checksum:sha1', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha1') && DONE;\r\n\t\t\t// We assume sha2/3-256 although that may fail in some cases and other lengths are chosen\r\n\t\t\t// Never seen this implemtned in the wild, so let's try this until another use case comes up\r\n\t\t\t_.rename(obj, 'checksum:sha2', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha2-256') && DONE;\r\n\t\t\t_.rename(obj, 'checksum:sha3', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha3-256') && DONE;\r\n\t\t}\r\n\r\n\t\tV.before('1.0.0-rc.1') && _.rename(obj, 'checksum:multihash', 'file:checksum') && _.addExtension(context, SCHEMAS.file) && DONE;\r\n\t},\r\n\r\n\tcube() {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tdtr(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'dtr:start_datetime', 'start_datetime') && DONE;\r\n\t\t\t_.rename(obj, 'dtr:end_datetime', 'end_datetime') && DONE;\r\n\t\t\t_.removeExtension(context, 'datetime-range') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\teo(obj, context) {\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'eo:epsg', 'proj:epsg') && _.addExtension(context, SCHEMAS.projection) && DONE;\r\n\t\t\t_.rename(obj, 'eo:platform', 'platform') && DONE;\r\n\t\t\t_.rename(obj, 'eo:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\r\n\t\t\t_.rename(obj, 'eo:constellation', 'constellation') && DONE;\r\n\t\t\t_.rename(obj, 'eo:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:azimuth', 'view:azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:sun_azimuth', 'view:sun_azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t\t_.rename(obj, 'eo:sun_elevation', 'view:sun_elevation') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t}\r\n\r\n\t\tV.before('1.0.0-beta.1') && _.rename(obj, 'eo:gsd', 'gsd') && DONE;\r\n\t},\r\n\r\n\tlabel(obj) {\r\n\t\t// Migrate 0.8.0-rc1 non-pluralized forms\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t_.rename(obj, 'label:property', 'label:properties') && DONE;\r\n\t\t\t_.rename(obj, 'label:task', 'label:tasks') && DONE;\r\n\t\t\t_.rename(obj, 'label:overview', 'label:overviews') && _.toArray(obj, 'label:overviews') && DONE;\r\n\t\t\t_.rename(obj, 'label:method', 'label:methods') && DONE;\r\n\t\t\t_.toArray(obj, 'label:classes') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tpc(obj) {\r\n\t\tV.before('0.8.0') && _.rename(obj, 'pc:schema', 'pc:schemas') && DONE;\r\n\t},\r\n\r\n\tproj(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\tsar(obj, context) {\r\n\t\t// If no context is given, it's in summaries\r\n\t\tlet summary = !context;\r\n\r\n\t\t// Which version have they been (re)moved?\r\n\t\t_.rename(obj, 'sar:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t_.rename(obj, 'sar:pass_direction', 'sat:orbit_state') && _.mapValues(obj, 'sat:orbit_state', [null], ['geostationary']) && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\r\n\t\tif (V.before('0.7.0')) {\r\n\t\t\t_.flattenArray(obj, 'sar:resolution', ['sar:resolution_range', 'sar:resolution_azimuth'], summary) && DONE;\r\n\t\t\t_.flattenArray(obj, 'sar:pixel_spacing', ['sar:pixel_spacing_range', 'sar:pixel_spacing_azimuth'], summary) && DONE;\r\n\t\t\t_.flattenArray(obj, 'sar:looks', ['sar:looks_range', 'sar:looks_azimuth', 'sar:looks_equivalent_number'], summary) && DONE;\r\n\t\t\t_.rename(obj, 'sar:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\r\n\t\t}\r\n\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'sar:platform', 'platform') && DONE;\r\n\t\t\t_.rename(obj, 'sar:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\r\n\t\t\t_.rename(obj, 'sar:constellation', 'constellation') && DONE;\r\n\t\t\t_.rename(obj, 'sar:type', 'sar:product_type') && DONE;\r\n\t\t\t_.rename(obj, 'sar:polarization', 'sar:polarizations') && DONE;\r\n\t\t\t_.flattenOneElementArray(obj, 'sar:absolute_orbit', summary) && _.rename(obj, 'sar:absolute_orbit', 'sat:absolute_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\t\t\t_.flattenOneElementArray(obj, 'sar:relative_orbit', summary) && _.rename(obj, 'sar:relative_orbit', 'sat:relative_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tsat(obj) {\r\n\t\t// Migrate 0.9.0-rc _angle suffixes\r\n\t\tif (V.before('0.9.0')) {\r\n\t\t\t_.rename(obj, 'sat:off_nadir_angle', 'sat:off_nadir') && DONE;\r\n\t\t\t_.rename(obj, 'sat:azimuth_angle', 'sat:azimuth') && DONE;\r\n\t\t\t_.rename(obj, 'sat:sun_azimuth_angle', 'sat:sun_azimuth') && DONE;\r\n\t\t\t_.rename(obj, 'sat:sun_elevation_angle', 'sat:sun_elevation') && DONE;\r\n\t\t}\r\n\t},\r\n\r\n\tsci(obj) {\r\n\t\t// Nothing to do\r\n\t},\r\n\r\n\titem(obj) { // Single Item\r\n\t\tif (V.before('0.8.0')) {\r\n\t\t\t_.rename(obj, 'item:license', 'license') && DONE;\r\n\t\t\t_.rename(obj, 'item:providers', 'providers') && DONE;\r\n\t\t\t// No need to remove the extension from stac_extensions as it was not available before 0.8.0\r\n\t\t}\r\n\t},\r\n\r\n\tview(obj) {\r\n\t\t// Nothing to do\r\n\t}\r\n\r\n};\r\n\r\nvar Migrate = {\r\n\r\n\titem(item, collection = null, updateVersionNumber = true) {\r\n\t\tItem.migrate(item, collection, updateVersionNumber);\r\n\t\treturn item;\r\n\t},\r\n\t\r\n\tcatalog(catalog, updateVersionNumber = true) {\r\n\t\tCatalog.migrate(catalog, updateVersionNumber);\r\n\t\treturn catalog;\r\n\t},\r\n\t\r\n\tcollection(collection, updateVersionNumber = true) {\r\n\t\tCollection.migrate(collection, updateVersionNumber);\r\n\t\treturn collection;\r\n\t},\r\n\t\r\n\tstac(object, updateVersionNumber = true) {\r\n\t\tif (object.type === 'Feature') {\r\n\t\t\treturn Migrate.item(object, null, updateVersionNumber);\r\n\t\t}\r\n\t\telse if (object.type === 'Collection' || _.isDefined(object.extent) || _.isDefined(object.license)) {\r\n\t\t\treturn Migrate.collection(object,  updateVersionNumber);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Migrate.catalog(object, updateVersionNumber);\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = Migrate;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"vue-component stac stac-fields metadata\"},[_vm._l((_vm.fields),function(group){return [_c(_vm.headingTag,{key:group.extension,tag:\"component\",domProps:{\"innerHTML\":_vm._s(group.label || 'General')}}),_vm._l((group.properties),function(prop,field){return _c('div',{key:group.extension + field,staticClass:\"tabular\",class:{wrap: Boolean(prop.custom || prop.items)},attrs:{\"id\":'field_' + field}},[_c('label',{attrs:{\"title\":field},domProps:{\"innerHTML\":_vm._s(prop.label)}}),_c('div',{staticClass:\"value\"},[_vm._t(field,function(){return [(prop.items)?_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[(!Array.isArray(prop.formatted))?_c('th',[_vm._v(\" \")]):_vm._e(),_vm._l((prop.itemOrder),function(col){return _c('th',{key:col,domProps:{\"innerHTML\":_vm._s(prop.items[col].label)}})})],2)]),_c('tbody',_vm._l((prop.formatted),function(row,r){return _c('tr',{key:r},[(!Array.isArray(prop.formatted))?_c('th',[_vm._v(_vm._s(r))]):_vm._e(),_vm._l((prop.itemOrder),function(col){return _c('td',{key:(col + \"_\" + r),domProps:{\"innerHTML\":_vm._s(row[col])}})})],2)}),0)]):(field === 'card4l:processing_chain')?_c('Process',{staticClass:\"inline\",attrs:{\"process\":prop.value,\"provideDownload\":false,\"showGraph\":true}}):(prop.formatted)?_c('div',{staticClass:\"formatted\",domProps:{\"innerHTML\":_vm._s(prop.formatted)}}):[_vm._v(_vm._s(prop.value))]]},{\"prop\":prop,\"field\":field})],2)])})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<section class=\"vue-component stac stac-fields metadata\">\n\t\t<template v-for=\"group in fields\">\n\t\t\t<component :is=\"headingTag\" v-html=\"group.label || 'General'\" :key=\"group.extension\" />\n\t\t\t<div v-for=\"(prop, field) in group.properties\" :key=\"group.extension + field\" :id=\"'field_' + field\" class=\"tabular\" :class=\"{wrap: Boolean(prop.custom || prop.items)}\">\n\t\t\t\t<label :title=\"field\" v-html=\"prop.label\" />\n\t\t\t\t<div class=\"value\">\n\t\t\t\t\t<slot :name=\"field\" :prop=\"prop\" :field=\"field\">\n\t\t\t\t\t\t<table v-if=\"prop.items\" class=\"table\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th v-if=\"!Array.isArray(prop.formatted)\">&nbsp;</th>\n\t\t\t\t\t\t\t\t\t<th v-for=\"col in prop.itemOrder\" :key=\"col\" v-html=\"prop.items[col].label\"></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr v-for=\"(row, r) in prop.formatted\" :key=\"r\">\n\t\t\t\t\t\t\t\t\t<th v-if=\"!Array.isArray(prop.formatted)\">{{ r }}</th>\n\t\t\t\t\t\t\t\t\t<td v-for=\"col in prop.itemOrder\" :key=\"`${col}_${r}`\" v-html=\"row[col]\" />\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<Process v-else-if=\"field === 'card4l:processing_chain'\" class=\"inline\" :process=\"prop.value\" :provideDownload=\"false\" :showGraph=\"true\" />\n\t\t\t\t\t\t<div class=\"formatted\" v-else-if=\"prop.formatted\" v-html=\"prop.formatted\" />\n\t\t\t\t\t\t<template v-else>{{ prop.value }}</template>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</section>\n</template>\n\n<script>\nimport StacFields from '@radiantearth/stac-fields';\nimport StacMigrate from '@radiantearth/stac-migrate';\nimport Utils from '../../utils'\n\nStacFields.Registry.externalRenderer = true;\nStacFields.Registry.addMetadataFields({\n\t\"eo:platform\": {\n\t\talias: \"platform\"\n\t},\n\t\"eo:instrument\": {\n\t\talias: \"instruments\"\n\t},\n\t\"gee:type\": {\n\t\tlabel: \"Collection Type\",\n\t\tformatter: StacFields.label\n\t}\n});\n\nexport default {\n\tname: 'StacFields',\n\tcomponents: {\n\t\tProcess: () => import('../Process.vue')\n\t},\n\tprops: {\n\t\tmetadata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({})\n\t\t},\n\t\theadingTag: {\n\t\t\ttype: String,\n\t\t\tdefault: 'h3'\n\t\t},\n\t\tignore: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t}\n\t},\n\tcomputed: {\n\t\tignoreFn() {\n\t\t\tif (this.ignore.length > 0) {\n\t\t\t\treturn key => !this.ignore.includes(key);\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tisCollection() {\n\t\t\treturn (this.metadata.type !== 'Feature');\n\n\t\t},\n\t\tfields() {\n\t\t\tlet data = JSON.parse(JSON.stringify(this.metadata));\n\t\t\tif (this.isCollection) {\n\t\t\t\tdata = StacMigrate.collection(data);\n\t\t\t\tif (!Utils.isObject(data.summaries)) {\n\t\t\t\t\tdata.summaries = {};\n\t\t\t\t}\n\t\t\t\tfor(let key in data) {\n\t\t\t\t\t// Copy all custom top-level fields to summaries for easier visualization\n\t\t\t\t\tif (key === 'version' || (key !== 'cube:dimensions' && key.includes(':'))) {\n\t\t\t\t\t\tdata.summaries[key] = [data[key]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn StacFields.formatSummaries(data, this.ignoreFn);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn StacFields.formatItemProperties(StacMigrate.item(data), this.ignoreFn);\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tnormalize(data) {\n\t\t\tif (this.isCollection) {\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn [data];\n\t\t\t}\n\t\t},\n\t\tlabel(key, specs = {}) {\n\t\t\treturn StacFields.label(key, specs);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n@import '../base.scss';\n.vue-component.stac-fields {\n\t.table {\n\t\twidth: 100%;\n\t\tborder-collapse: collapse;\n\t\tfont-size: 0.9em;\n\n\t\tth {\n\t\t\ttext-align: left;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t\t}\n\t\ttd, th {\n\t\t\tborder: 1px solid rgba(0, 0, 0, 0.2);\n\t\t\tpadding: 3px;\n\t\t}\n\t\ttd {\n\t\t\tvertical-align: top;\n\t\t}\n\t\ttbody tr:hover,\n\t\ttbody tr:hover th {\n\t\t\tbackground-color: rgba(0, 0, 0, 0.1);\n\t\t}\n\t}\n\t.description {\n\t\tp {\n\t\t\t&:first-of-type {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\t\t\t&:last-of-type {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StacFields.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StacFields.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StacFields.vue?vue&type=template&id=ee1fc2d4&\"\nimport script from \"./StacFields.vue?vue&type=script&lang=js&\"\nexport * from \"./StacFields.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StacFields.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StacFields.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}